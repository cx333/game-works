<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>WS 测试</title>
</head>
<body>
<h3>WebSocket 测试</h3>
<textarea cols="50" id="log" rows="10"></textarea><br>
<input id="input" type="text">
<button onclick="send()">发送</button>

<script>
    const ws = new WebSocket("ws://127.0.0.1:9001/ws");
    const log = document.getElementById("log");

    ws.onmessage = e => {
      log.value += "[收到] " + e.data + "\n";
    };

    ws.onopen = () => log.value += "[连接成功]\n";
    ws.onclose = () => log.value += "[连接关闭]\n";
    ws.onerror = e => log.value += "[连接错误]\n";

    function send() {
      const msg = document.getElementById("input").value;
      ws.send(msg);
      log.value += "[发送] " + msg + "\n";
    }
</script>
</body>
</html>
